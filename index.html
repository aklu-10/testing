<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

<!--     
    <canvas></canvas>

    <button onclick="shareCanvasAsImage()">share</button>

    <script>

        let canvas=document.querySelector("canvas");

        canvas.width=innerWidth;
        canvas.height=innerHeight;

        let ctx=canvas.getContext("2d");
        ctx.fillStyle="black";
        ctx.textAlign="center";
        ctx.font="40px arial";
        ctx.fillRect(0,0,innerWidth,innerHeight);
        ctx.fillStyle="blue";
        ctx.fillText("Hello World",canvas.width/2,canvas.height/2);


        async function shareCanvasAsImage()
        {
            const dataUrl=document.querySelector("canvas").toDataURL();

            const blob=await ( await fetch(dataUrl)).blob();
            const image=[];
            image.push(new File([blob],'canvas.png',{type:blob.type}))

            image.push(new File([blob],'canvas.png',{type:blob.type}))

            
            if (navigator.canShare && navigator.canShare({ files: [...image] })) {
                try {
                await navigator.share({
                    files: [...image],         // Array of files to share
                    title: 'Share Drawing'  // Share dialog title
                })
                } catch (error) {
                console.log('Sharing failed!', error)
                }
            } else {
                console.log('This device does not support sharing files.')
            }

        }

        shareCanvasAsImage();


    </script> -->

    <form id="share-files">
        <input type="file" id="files" multiple="multiple" />
        <br />
        <button type="submit">
          Share Selected Files
        </button>
      </form>

      <script>


const form = document.getElementById('share-files')

// Attach the submit event handler
form.addEventListener('submit', shareFiles)

// Share files on submit
async function shareFiles(event) {
  // Prevent form default behavior
  event.preventDefault()

  // Read files list from the file input
  const files = document.getElementById('files').files

  // Check if the device is able to share these files then open share dialog
  if (navigator.canShare && navigator.canShare({ files: files })) {
    try {
      await navigator.share({
        files: files,
        title: 'Share Files'
      })
    } catch (error) {
      console.log('Sharing failed', error)
    }
  } else {
    console.log('This device does not support sharing files.')
  }
}

      </script>




</body>
</html>